webpackJsonp([9],{40:function(t,e,n){"use strict";var a=n(24),r=n(94);a.default.use(r.a),e.a=new r.a({routes:[{path:"/login",component:function(){return n.e(4).then(n.bind(null,99))}},{path:"/",component:function(){return n.e(0).then(n.bind(null,45))}},{path:"/courses",component:function(){return n.e(0).then(n.bind(null,45))}},{path:"/course/:id",component:function(){return n.e(5).then(n.bind(null,98))}},{path:"/section-codes/:sid",component:function(){return n.e(2).then(n.bind(null,100))}},{path:"/section-tests/:sid",component:function(){return n.e(3).then(n.bind(null,102))}},{path:"/section-docs/:sid",component:function(){return n.e(1).then(n.bind(null,101))}}]})},41:function(t,e,n){function a(t){n(86)}var r=n(42)(n(46),n(93),a,"data-v-0593154d",null);t.exports=r.exports},44:function(t,e,n){"use strict";function a(t,e){return s.a.ajax({url:c+"/login",method:"post",data:{email:t,password:e}})}function r(t,e){return s.a.ajax({url:c+"/createUser",method:"post",data:{email:t,password:e}})}function o(){var t=u.a.getAccessToken();return s.a.ajax({url:c+"/validateToken",method:"post",data:{token:t}})}var i=n(43),s=n.n(i),u=n(8),c=u.a.G_API;e.a={Login:a,Register:r,validateToken:o}},46:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(16),r=n.n(a),o=n(15),i=n.n(o),s=n(8),u=n(44);e.default={name:"app",data:function(){return{}},methods:{onSelect:function(t){if("/logout"===t)return s.a.clear(),window.location.reload();this.$router.push(t)}},computed:{isLogined:function(){return!s.a.isExpired()}},mounted:function(){var t=this;return i()(r.a.mark(function e(){var n,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t.isLogined){e.next=7;break}return e.next=4,u.a.validateToken();case 4:n=e.sent,a=n.roles,a.indexOf("author")<0&&t.$Modal.warning({title:"未认证用户",content:"抱歉，只有认证作者才可以访问课程制作系统，请联系管理员认证。",onOk:function(){return s.a.clear(),window.location.reload()}});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),e.t0.status&&401==e.t0.status?s.a.clear():console.error(e.t0);case 12:case"end":return e.stop()}},e,t,[[0,9]])}))()}}},47:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(16),r=n.n(a),o=n(15),i=n.n(o),s=n(24),u=n(41),c=n.n(u),l=n(40),p=n(8),d=function(){var t=i()(r.a.mark(function t(){var e;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.e(6).then(n.bind(null,85));case 2:return t.next=4,n.e(7).then(n.bind(null,87));case 4:e=t.sent,s.default.use(e),l.a.beforeEach(function(t,n,a){e.Spin.show(),p.a.isExpired()&&"/login"!==t.path?l.a.push("/login"):p.a.isExpired()||"/login"!==t.path?(e.LoadingBar.start(),a()):l.a.push("/")}),l.a.afterEach(function(t,n,a){e.LoadingBar.finish(),e.Spin.hide()}),new s.default({el:"#app",router:l.a,template:"<App/>",components:{App:c.a}});case 9:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}();s.default.config.productionTip=!1,d()},8:function(t,e,n){"use strict";var a=n(48),r=n.n(a);e.a={G_API:"http://api.step8step.com:8888",param:"__identity",get:function(){var t=localStorage.getItem(this.param);return t?JSON.parse(t):null},set:function(t){localStorage.setItem(this.param,r()(t))},clear:function(){localStorage.removeItem(this.param)},getUserId:function(){var t=this.get();return t?t.uid:null},getAccessToken:function(){var t=this.get();return t?t.access_token:null},isExpired:function(){var t=(new Date).getTime(),e=this.get();return!(e&&e.expire&&e.expire>t)}}},86:function(t,e){},93:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"layout"},[n("Menu",{attrs:{mode:"horizontal",theme:"dark","active-name":"/"},on:{"on-select":t.onSelect}},[n("div",{staticClass:"layout-logo"}),t._v(" "),t.isLogined?n("div",{staticClass:"layout-nav"},[n("Menu-item",{attrs:{name:"/courses"}},[n("Icon",{attrs:{type:"flag"}}),t._v("\n                我的作品\n            ")],1),t._v(" "),n("Menu-item",{attrs:{name:"/logout"}},[n("Icon",{attrs:{type:"ios-analytics"}}),t._v("\n                退出登录\n            ")],1)],1):t._e()]),t._v(" "),n("div",{staticClass:"layout-content"},[n("transition",{attrs:{mode:"out-in"}},[n("router-view")],1)],1),t._v(" "),t._m(0)],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"layout-copy"},[t._v("\n        （内测）2018 © step8step.com    \n        "),n("b",{staticStyle:{color:"darkcyan"}},[t._v("申请课程作者QQ群：603059673")])])}]}}},[47]);
//# sourceMappingURL=app.e42935e654ab867edf49.js.map