webpackJsonp([0],{107:function(e,t,o){"use strict";function r(){return O.a.ajax({url:I+"/getTemplates",method:"get",headers:{Authorization:"Bearer "+q.a.getAccessToken()}})}function a(){return O.a.ajax({url:I+"/getOwnCourses",method:"get",headers:{Authorization:"Bearer "+q.a.getAccessToken()}})}function n(e){return O.a.ajax({url:I+"/getOwnCourse?id="+e,method:"get",headers:{Authorization:"Bearer "+q.a.getAccessToken()}})}function s(e){return O.a.ajax({url:I+"/createCourse",data:e,method:"post",headers:{Authorization:"Bearer "+q.a.getAccessToken()}})}function i(e){return O.a.ajax({url:I+"/deleteCourse",method:"post",data:{course_id:e},headers:{Authorization:"Bearer "+q.a.getAccessToken()}})}function c(e,t){return z({course_id:e,description:t})}function u(e,t){return z({course_id:e,name:t})}function l(e){return O.a.ajax({url:I+"/publishCourse",data:{id:e},method:"post",headers:{Authorization:"Bearer "+q.a.getAccessToken()}})}function d(e){return O.a.ajax({url:I+"/unpublishCourse",data:{id:e},method:"post",headers:{Authorization:"Bearer "+q.a.getAccessToken()}})}function p(e,t,o){return O.a.ajax({url:I+"/createChapter",data:{course_id:e,name:t,description:o},method:"post",headers:{Authorization:"Bearer "+q.a.getAccessToken()}})}function h(e,t){return F({chapter_id:e,name:t})}function m(e,t){return F({chapter_id:e,description:t})}function f(e,t){return F({chapter_id:e,seq:t})}function v(e){return O.a.ajax({url:I+"/deleteChapter",data:{id:e},method:"post",headers:{Authorization:"Bearer "+q.a.getAccessToken()}})}function g(e){return O.a.ajax({url:I+"/getSectionDetail?id="+e,method:"get",headers:{Authorization:"Bearer "+q.a.getAccessToken()}})}function _(e,t,o,r,a,n){return O.a.ajax({url:I+"/createSection",data:{course_id:e,chapter_id:t,template_id:o||0,name:r,description:a,image:n},method:"post",headers:{Authorization:"Bearer "+q.a.getAccessToken()}})}function C(e){return O.a.ajax({url:I+"/publishSection",data:{section_id:e},method:"post",headers:{Authorization:"Bearer "+q.a.getAccessToken()}})}function x(e){return O.a.ajax({url:I+"/unpublishSection",data:{section_id:e},method:"post",headers:{Authorization:"Bearer "+q.a.getAccessToken()}})}function k(e){return O.a.ajax({url:I+"/deleteSection",data:{section_id:e},method:"post",headers:{Authorization:"Bearer "+q.a.getAccessToken()}})}function b(e,t){return R({section_id:e,name:t})}function w(e,t){return R({section_id:e,description:t})}function A(e,t){return R({section_id:e,seq:t})}function y(e,t){return R({section_id:e,testcase:t})}function B(e,t){return R({section_id:e,document:t})}function M(e,t){return O.a.ajax({url:I+"/getSectionCodeFiles?sid="+e+"&path="+t,method:"get",headers:{Authorization:"Bearer "+q.a.getAccessToken()}})}function T(e,t){return O.a.ajax({url:I+"/getSectionCodeFileContent?sid="+e+"&path="+t,method:"get",headers:{Authorization:"Bearer "+q.a.getAccessToken()}})}function S(e,t){return O.a.ajax({url:I+"/createSectionCodeFolder",data:{sid:e,path:t},method:"post",headers:{Authorization:"Bearer "+q.a.getAccessToken()}})}function j(e,t,o){return O.a.ajax({url:I+"/updateSectionCodeFileContent",data:{sid:e,path:t,content:o},method:"post",headers:{Authorization:"Bearer "+q.a.getAccessToken()}})}function $(e,t){return O.a.ajax({url:I+"/deleteSectionCodeFile",data:{sid:e,path:t},method:"post",headers:{Authorization:"Bearer "+q.a.getAccessToken()}})}function z(e){return O.a.ajax({url:I+"/updateCourse",data:{course_id:e.course_id,name:e.name||null,description:e.description||null},method:"post",headers:{Authorization:"Bearer "+q.a.getAccessToken()}})}function F(e){return O.a.ajax({url:I+"/updateChapter",data:{chapter_id:e.chapter_id,name:e.name||null,description:e.description||null,seq:e.seq||null},method:"post",headers:{Authorization:"Bearer "+q.a.getAccessToken()}})}function R(e){return O.a.ajax({url:I+"/updateSection",data:{section_id:e.section_id,name:e.name||null,description:e.description||null,image:e.image||null,template_id:e.template_id||null,seq:e.seq||null,testcase:e.testcase||null,document:e.document||null},method:"post",headers:{Authorization:"Bearer "+q.a.getAccessToken()}})}var D=o(43),O=o.n(D),q=o(8),I=q.a.G_API;t.a={getTemplates:r,getOwnCourses:a,getOwnCourse:n,createCourse:s,publishCourse:l,unpublishCourse:d,renameCourse:u,updateCourseDescription:c,deleteCourse:i,createChapter:p,renameChapter:h,updateChapterDescription:m,adjustChapterSeq:f,deleteChapter:v,getSection:g,createSection:_,publishSection:C,unpublishSection:x,deleteSection:k,renameSection:b,updateSectionDescription:w,adjustSectionSeq:A,updateSectionTestcase:y,updateSectionDocument:B,getSectionCodeFiles:M,getSectionCodeFileContent:T,createSectionCodeFolder:S,updateSectionCodeFileContent:j,deleteCodeFile:$}},335:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(16),a=o.n(r),n=o(15),s=o.n(n),i=o(107);t.default={model:{prop:"_show",event:"close"},props:{_show:Boolean,course:Object},data:function(){return{value:null,loading:!1}},methods:{ok:function(){var e=this;return s()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.value){t.next=3;break}return e.$Notice.error({title:"验证失败",desc:"名称不可为空"}),t.abrupt("return");case 3:if(e.value!==e.course.name){t.next=6;break}return e.$Notice.info({title:"名称无更变",desc:"你没有更改课程名,或新旧课程名相同"}),t.abrupt("return",e.$emit("close",!1));case 6:return e.loading=!0,t.prev=7,t.next=10,i.a.renameCourse(e.course._id,e.value);case 10:e.$Notice.success({title:"重命名课程成功"}),e.$emit("ok",e.value),e.$emit("close",!1),e.value="",t.next=21;break;case 16:t.prev=16,t.t0=t.catch(7),console.log(t.t0),e.$Notice.error({title:"操作失败",desc:t.t0.toString()}),e.$emit("err",e.value);case 21:e.loading=!1;case 22:case"end":return t.stop()}},t,e,[[7,16]])}))()},cancel:function(){this.loading=!1,this.value=""},copyTo:function(){this.value||(this.value=this.course.name)}},computed:{show:{get:function(){return this._show},set:function(e){this.$emit("close",e)}}}}},336:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(16),a=o.n(r),n=o(15),s=o.n(n),i=o(107);t.default={model:{prop:"show",event:"close"},props:{show:Boolean,course:Object},data:function(){return{value:"",loading:!1}},methods:{ok:function(){var e=this;return s()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.value){t.next=2;break}return t.abrupt("return",e.$Notice.error({title:"验证失败",desc:"课程简介不可为空"}));case 2:if(e.value!==e.course.desc){t.next=5;break}return e.$Notice.info({title:"数据无更变",desc:"你没有更改课程简介内容，或新旧内容相同"}),t.abrupt("return",e.$emit("close",!1));case 5:return e.loading=!0,t.prev=6,t.next=9,i.a.updateCourseDescription(e.course._id,e.value);case 9:e.$Notice.success({title:"更新课程简介成功"}),e.$emit("ok",e.value),e.$emit("close",!1),e.value="",t.next=20;break;case 15:t.prev=15,t.t0=t.catch(6),console.log(t.t0),e.$Notice.error({title:"操作失败",desc:t.t0.toString()}),e.$emit("err",e.value);case 20:e.loading=!1;case 21:case"end":return t.stop()}},t,e,[[6,15]])}))()},cancel:function(){this.loading=!1,this.value=""},copyTo:function(){this.value||(this.value=this.course.desc)}},computed:{_show:{get:function(){return this.show},set:function(e){this.$emit("close",e)}}}}},337:function(e,t,o){t=e.exports=o(96)(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"RenameCourseModal.vue",sourceRoot:""}])},338:function(e,t,o){t=e.exports=o(96)(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"UpdateCourseDescriptionModal.vue",sourceRoot:""}])},339:function(e,t,o){var r=o(337);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);o(97)("3afe7036",r,!0)},340:function(e,t,o){var r=o(338);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);o(97)("9b7dce1a",r,!0)},347:function(e,t,o){function r(e){o(339)}var a=o(42)(o(335),o(349),r,null,null);e.exports=a.exports},348:function(e,t,o){function r(e){o(340)}var a=o(42)(o(336),o(350),r,null,null);e.exports=a.exports},349:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("Modal",{attrs:{title:"重命名课程"},on:{"on-cancel":e.cancel},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[e._v("\n    原名称：\n    "),o("Input",{staticStyle:{width:"300px"},attrs:{readonly:"",value:e.course.name,placeholder:e.course.name}}),e._v(" "),o("br"),e._v(" "),o("br"),e._v(" 新名称：\n    "),o("Input",{staticStyle:{width:"300px"},attrs:{placeholder:e.course.name},on:{"on-focus":e.copyTo},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),e._v(" "),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("Button",{attrs:{type:"success",loading:e.loading},on:{click:e.ok}},[e._v("提交")])],1)],1)},staticRenderFns:[]}},350:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("Modal",{attrs:{title:"更新课程简介"},on:{"on-cancel":e.cancel},model:{value:e._show,callback:function(t){e._show=t},expression:"_show"}},[o("Form",{attrs:{"label-width":80}},[o("Form-item",{attrs:{label:"原简介"}},[o("Input",{attrs:{readonly:"",type:"textarea",value:e.course.desc,autosize:{minRows:4,maxRows:6}}})],1),e._v(" "),o("Form-item",{attrs:{label:"新简介"}},[o("Input",{attrs:{type:"textarea",placeholder:e.course.desc,autosize:{minRows:4,maxRows:6}},on:{"on-focus":e.copyTo},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)],1),e._v(" "),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("Button",{attrs:{type:"success",loading:e.loading},on:{click:e.ok}},[e._v("提交")])],1)],1)},staticRenderFns:[]}},376:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(16),a=o.n(r),n=o(15),s=o.n(n),i=o(107),c={name:[{required:!0,message:"课程名不可为空",trigger:"blur"},{type:"string",max:64,message:"课程名不大于64字",trigger:"blur"}],description:[{required:!0,message:"请输入课程简介",trigger:"blur"},{type:"string",min:10,message:"课程简介不少于10字",trigger:"blur"},{type:"string",max:255,message:"课程简介不大于255字",trigger:"blur"}]};t.default={name:"create-course-modal",props:{value:Boolean},data:function(){return{data:{name:"",description:""},loading:!1,rules:c}},computed:{show:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},methods:{ok:function(){var e=this;this.$refs["new-course-form"].validate(function(){var t=s()(a.a.mark(function t(o){var r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o){t.next=2;break}return t.abrupt("return");case 2:return e.loading=!0,t.prev=3,t.next=6,i.a.createCourse(e.data);case 6:r=t.sent,e.$Notice.success({title:"创建课程成功"}),e.data.name="",e.data.description="",e.$emit("ok",r),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(3),e.$emit("err",t.t0);case 16:e.show=!1,e.loading=!1;case 18:case"end":return t.stop()}},t,e,[[3,13]])}));return function(e){return t.apply(this,arguments)}}())}}}},389:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(16),a=o.n(r),n=o(15),s=o.n(n),i=o(107),c=o(548),u=o.n(c),l=o(347),d=o.n(l),p=o(348),h=o.n(p);t.default={name:"user-courses",data:function(){return{courses:[],course:{},renameCourseModal:!1,updateCourseDescriptionModal:!1,createCourseModal:!1}},created:function(){this.getCourses()},methods:{getCourses:function(){var e=this;return s()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.getOwnCourses();case 2:e.courses=t.sent;case 3:case"end":return t.stop()}},t,e)}))()},rename:function(e){this.course=e,this.renameCourseModal=!0},updateDescription:function(e){this.course=e,this.updateCourseDescriptionModal=!0}},components:{CreateCourseModal:u.a,RenameCourseModal:d.a,UpdateCourseDescriptionModal:h.a}}},396:function(e,t,o){t=e.exports=o(96)(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"CreateCourseModal.vue",sourceRoot:""}])},402:function(e,t,o){t=e.exports=o(96)(!0),t.push([e.i,"h1[data-v-7206290d],h2[data-v-7206290d]{font-weight:400}","",{version:3,sources:["/Users/wangfugen/workspace/hogwarts/clients/kitchen/src/pages/MyCourses.vue"],names:[],mappings:"AACA,wCAEE,eAAoB,CACrB",file:"MyCourses.vue",sourcesContent:["\nh1[data-v-7206290d],\nh2[data-v-7206290d] {\n  font-weight: normal;\n}\n"],sourceRoot:""}])},417:function(e,t,o){var r=o(396);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);o(97)("5ae5ab06",r,!0)},423:function(e,t,o){var r=o(402);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);o(97)("655c22f8",r,!0)},45:function(e,t,o){function r(e){o(423)}var a=o(42)(o(389),o(567),r,"data-v-7206290d",null);e.exports=a.exports},548:function(e,t,o){function r(e){o(417)}var a=o(42)(o(376),o(561),r,null,null);e.exports=a.exports},561:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"create-course-modal"}},[o("Modal",{attrs:{title:"新建课程"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[o("Form",{ref:"new-course-form",attrs:{model:e.data,rules:e.rules,"label-position":"right","label-width":80}},[o("Form-item",{attrs:{label:"课程名称",prop:"name"}},[o("Input",{model:{value:e.data.name,callback:function(t){e.$set(e.data,"name",t)},expression:"data.name"}})],1),e._v(" "),o("Form-item",{attrs:{label:"课程介绍",prop:"description"}},[o("Input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:6},placeholder:"请输入..."},model:{value:e.data.description,callback:function(t){e.$set(e.data,"description",t)},expression:"data.description"}})],1)],1),e._v(" "),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("Button",{attrs:{type:"success",loading:e.loading},on:{click:e.ok}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]}},567:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"courses"},[o("h1",[e._v("课程列表")]),e._v(" "),o("br"),e._v(" "),o("Button",{attrs:{type:"ghost",size:"small",color:"gray"},on:{click:function(t){e.createCourseModal=!0}}},[o("Icon",{attrs:{type:"plus-round",color:"gray"}}),e._v("\n    新建课程\n  ")],1),e._v(" "),e._l(e.courses,function(t){return o("Row",{key:t._id},[o("Col",{attrs:{span:"12"}},[o("br"),e._v(" "),o("Card",[o("div",{attrs:{slot:"title"},slot:"title"},[o("Tooltip",{attrs:{placement:"top",content:"published"===t.status?"已发布":"未发布"}},["published"===t.status?o("Icon",{attrs:{type:"checkmark-circled",color:"green"}}):e._e(),e._v(" "),"unpublished"===t.status?o("Icon",{attrs:{type:"information-circled",color:"#ff9900"}}):e._e()],1),e._v(" "),o("router-link",{attrs:{to:"/course/"+t._id}},[e._v(e._s(t.name))]),e._v(" "),o("Tooltip",{attrs:{placement:"top",content:"修改名称"}},[o("Button",{attrs:{type:"text",shape:"circle",size:"small",icon:"compose"},on:{click:function(o){e.rename(t)}}})],1)],1),e._v(" "),o("div",[o("p",[e._v("\n          "+e._s(t.desc)+"\n          "),o("Tooltip",{attrs:{placement:"top",content:"编辑简介"}},[o("Button",{attrs:{type:"text",shape:"circle",size:"small",icon:"compose"},on:{click:function(o){e.updateDescription(t)}}})],1)],1)])])],1)],1)}),e._v(" "),o("CreateCourseModal",{on:{ok:e.getCourses},model:{value:e.createCourseModal,callback:function(t){e.createCourseModal=t},expression:"createCourseModal"}}),e._v(" "),o("RenameCourseModal",{attrs:{course:e.course},on:{ok:e.getCourses},model:{value:e.renameCourseModal,callback:function(t){e.renameCourseModal=t},expression:"renameCourseModal"}}),e._v(" "),o("UpdateCourseDescriptionModal",{attrs:{course:e.course},on:{ok:e.getCourses},model:{value:e.updateCourseDescriptionModal,callback:function(t){e.updateCourseDescriptionModal=t},expression:"updateCourseDescriptionModal"}})],2)},staticRenderFns:[]}}});
//# sourceMappingURL=0.d3daaf4a1e2cd1bdf4bb.js.map