{"version":3,"sources":["webpack:///static/js/app.0d868a8c0926f86eaccc.js","webpack:///./src/router/index.js","webpack:///./src/App.vue?35a7","webpack:///./src/api/user.js","webpack:///App.vue","webpack:///./src/main.js","webpack:///./src/api/identity.js","webpack:///./src/App.vue?57a8"],"names":["webpackJsonp","40","module","__webpack_exports__","__webpack_require__","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_1_vue_router__","use","routes","path","component","e","then","bind","41","exports","injectStyle","ssrContext","Component","44","Login","email","password","__WEBPACK_IMPORTED_MODULE_0_jquery___default","a","ajax","url","G_API","method","data","Register","validateToken","token","__WEBPACK_IMPORTED_MODULE_1__api_identity__","getAccessToken","__WEBPACK_IMPORTED_MODULE_0_jquery__","n","46","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default","__WEBPACK_IMPORTED_MODULE_2__api_identity__","__WEBPACK_IMPORTED_MODULE_3__api_user__","name","methods","onSelect","clear","window","location","reload","this","$router","push","computed","isLogined","isExpired","mounted","_this","mark","_callee","result","roles","wrap","_context","prev","next","sent","indexOf","$Modal","warning","title","content","onOk","t0","status","console","error","stop","47","__WEBPACK_IMPORTED_MODULE_2_vue__","__WEBPACK_IMPORTED_MODULE_3__App__","__WEBPACK_IMPORTED_MODULE_3__App___default","__WEBPACK_IMPORTED_MODULE_4__router__","__WEBPACK_IMPORTED_MODULE_5__api_identity__","main","_ref","iView","beforeEach","to","from","Spin","show","LoadingBar","start","afterEach","finish","hide","el","router","template","components","App","apply","arguments","config","productionTip","8","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default","param","get","identity","localStorage","getItem","JSON","parse","set","setItem","removeItem","getUserId","ctime","Date","getTime","86","93","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","mode","theme","active-name","on","on-select","_v","type","_e","staticRenderFns"],"mappings":"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","file":"static/js/app.0d868a8c0926f86eaccc.js","sourcesContent":["webpackJsonp([10],{\n\n/***/ 40:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue_router__ = __webpack_require__(94);\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].use(__WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (new __WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]({\n  routes: [{\n    path: '/login',\n    component: function component() {\n      return __webpack_require__.e/* import() */(5).then(__webpack_require__.bind(null, 99));\n    }\n  }, {\n    path: '/register',\n    component: function component() {\n      return __webpack_require__.e/* import() */(4).then(__webpack_require__.bind(null, 100));\n    }\n  }, {\n    path: '/',\n    component: function component() {\n      return __webpack_require__.e/* import() */(0).then(__webpack_require__.bind(null, 45));\n    }\n  }, {\n    path: '/courses',\n    component: function component() {\n      return __webpack_require__.e/* import() */(0/* duplicate */).then(__webpack_require__.bind(null, 45));\n    }\n  }, {\n    path: '/course/:id',\n    component: function component() {\n      return __webpack_require__.e/* import() */(6).then(__webpack_require__.bind(null, 98));\n    }\n  }, {\n    path: '/section-codes/:sid',\n    component: function component() {\n      return __webpack_require__.e/* import() */(2).then(__webpack_require__.bind(null, 101));\n    }\n  }, {\n    path: '/section-tests/:sid',\n    component: function component() {\n      return __webpack_require__.e/* import() */(3).then(__webpack_require__.bind(null, 103));\n    }\n  },\n  // {\n  //   path: '/section-tests-blockly/:sid',\n  //   component: () => import('@/pages/SectionTestBlockly')\n  // },\n  {\n    path: '/section-docs/:sid',\n    component: function component() {\n      return __webpack_require__.e/* import() */(1).then(__webpack_require__.bind(null, 102));\n    }\n  }]\n}));\n\n/***/ }),\n\n/***/ 41:\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(86)\n}\nvar Component = __webpack_require__(42)(\n  /* script */\n  __webpack_require__(46),\n  /* template */\n  __webpack_require__(93),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-0593154d\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 44:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_jquery__ = __webpack_require__(43);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_jquery___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_jquery__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__api_identity__ = __webpack_require__(8);\n\n\n\nvar G_API = __WEBPACK_IMPORTED_MODULE_1__api_identity__[\"a\" /* default */].G_API;\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  Login: Login,\n  Register: Register,\n  validateToken: validateToken\n});\n\nfunction Login(email, password) {\n  return __WEBPACK_IMPORTED_MODULE_0_jquery___default.a.ajax({\n    url: G_API + '/login',\n    method: 'post',\n    data: {\n      email: email,\n      password: password\n    }\n  });\n}\n\nfunction Register(email, password) {\n  return __WEBPACK_IMPORTED_MODULE_0_jquery___default.a.ajax({\n    url: G_API + '/createUser',\n    method: 'post',\n    data: {\n      email: email,\n      password: password\n    }\n  });\n}\n\nfunction validateToken() {\n  var token = __WEBPACK_IMPORTED_MODULE_1__api_identity__[\"a\" /* default */].getAccessToken();\n  return __WEBPACK_IMPORTED_MODULE_0_jquery___default.a.ajax({\n    url: G_API + '/validateToken',\n    method: 'post',\n    data: {\n      token: token\n    }\n  });\n}\n\n/***/ }),\n\n/***/ 46:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__api_identity__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__api_user__ = __webpack_require__(44);\n\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: \"app\",\n  data: function data() {\n    return {};\n  },\n\n  methods: {\n    onSelect: function onSelect(name) {\n      if (name === \"/logout\") {\n        __WEBPACK_IMPORTED_MODULE_2__api_identity__[\"a\" /* default */].clear();\n        return window.location.reload();\n      }\n      this.$router.push(name);\n    }\n  },\n  computed: {\n    isLogined: function isLogined() {\n      return !__WEBPACK_IMPORTED_MODULE_2__api_identity__[\"a\" /* default */].isExpired();\n    }\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    return __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default()( /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee() {\n      var result, roles;\n      return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n\n              if (!_this.isLogined) {\n                _context.next = 7;\n                break;\n              }\n\n              _context.next = 4;\n              return __WEBPACK_IMPORTED_MODULE_3__api_user__[\"a\" /* default */].validateToken();\n\n            case 4:\n              result = _context.sent;\n              roles = result.roles;\n\n              if (roles.indexOf(\"author\") < 0) {\n                _this.$Modal.warning({\n                  title: \"未认证用户\",\n                  content: \"抱歉，只有认证作者才可以访问课程制作系统，请联系管理员认证。\",\n                  onOk: function onOk() {\n                    __WEBPACK_IMPORTED_MODULE_2__api_identity__[\"a\" /* default */].clear();\n                    return window.location.reload();\n                  }\n                });\n              }\n\n            case 7:\n              _context.next = 12;\n              break;\n\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](0);\n\n              if (_context.t0.status && _context.t0.status == 401) {\n                __WEBPACK_IMPORTED_MODULE_2__api_identity__[\"a\" /* default */].clear();\n              } else console.error(_context.t0);\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, _this, [[0, 9]]);\n    }))();\n  }\n});\n\n/***/ }),\n\n/***/ 47:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_vue__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__App__ = __webpack_require__(41);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__App___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__App__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__router__ = __webpack_require__(40);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__api_identity__ = __webpack_require__(8);\n\n\n\nvar main = function () {\n  var _ref = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default()( /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee() {\n    var iView;\n    return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return __webpack_require__.e/* import() */(7).then(__webpack_require__.bind(null, 85));\n\n          case 2:\n            _context.next = 4;\n            return __webpack_require__.e/* import() */(8).then(__webpack_require__.bind(null, 87));\n\n          case 4:\n            iView = _context.sent;\n\n\n            __WEBPACK_IMPORTED_MODULE_2_vue__[\"default\"].use(iView);\n\n            __WEBPACK_IMPORTED_MODULE_4__router__[\"a\" /* default */].beforeEach(function (to, from, next) {\n              iView.Spin.show();\n              if (__WEBPACK_IMPORTED_MODULE_5__api_identity__[\"a\" /* default */].isExpired() && to.path !== '/login' && to.path !== '/register') {\n                __WEBPACK_IMPORTED_MODULE_4__router__[\"a\" /* default */].push('/login');\n              } else if (!__WEBPACK_IMPORTED_MODULE_5__api_identity__[\"a\" /* default */].isExpired() && to.path === '/login') {\n                __WEBPACK_IMPORTED_MODULE_4__router__[\"a\" /* default */].push('/');\n              } else {\n                iView.LoadingBar.start();\n                next();\n              }\n            });\n\n            __WEBPACK_IMPORTED_MODULE_4__router__[\"a\" /* default */].afterEach(function (to, from, next) {\n              iView.LoadingBar.finish();\n              iView.Spin.hide();\n            });\n\n            /* eslint-disable no-new */\n            new __WEBPACK_IMPORTED_MODULE_2_vue__[\"default\"]({\n              el: '#app',\n              router: __WEBPACK_IMPORTED_MODULE_4__router__[\"a\" /* default */],\n              template: '<App/>',\n              components: {\n                App: __WEBPACK_IMPORTED_MODULE_3__App___default.a\n              }\n            });\n\n          case 9:\n          case 'end':\n            return _context.stop();\n        }\n      }\n    }, _callee, this);\n  }));\n\n  return function main() {\n    return _ref.apply(this, arguments);\n  };\n}();\n\n// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_2_vue__[\"default\"].config.productionTip = false;\n\nmain();\n\n/***/ }),\n\n/***/ 8:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__ = __webpack_require__(48);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__);\n\nvar G_API = \"http://api.step8step.com:8888\";\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n    G_API: G_API,\n    param: '__identity',\n    get: function get() {\n        var identity = localStorage.getItem(this.param);\n        return identity ? JSON.parse(identity) : null;\n    },\n    set: function set(data) {\n        localStorage.setItem(this.param, __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(data));\n    },\n    clear: function clear() {\n        localStorage.removeItem(this.param);\n    },\n    getUserId: function getUserId() {\n        var identity = this.get();\n        return identity ? identity['uid'] : null;\n    },\n    getAccessToken: function getAccessToken() {\n        var identity = this.get();\n        return identity ? identity['access_token'] : null;\n    },\n    isExpired: function isExpired() {\n        var ctime = new Date().getTime();\n        var identity = this.get();\n        if (identity && identity['expire'] && identity['expire'] > ctime) return false;else return true;\n    }\n});\n\n/***/ }),\n\n/***/ 86:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 93:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"layout\"\n  }, [_c('Menu', {\n    attrs: {\n      \"mode\": \"horizontal\",\n      \"theme\": \"dark\",\n      \"active-name\": \"/\"\n    },\n    on: {\n      \"on-select\": _vm.onSelect\n    }\n  }, [_c('div', {\n    staticClass: \"layout-logo\"\n  }), _vm._v(\" \"), (_vm.isLogined) ? _c('div', {\n    staticClass: \"layout-nav\"\n  }, [_c('Menu-item', {\n    attrs: {\n      \"name\": \"/courses\"\n    }\n  }, [_c('Icon', {\n    attrs: {\n      \"type\": \"flag\"\n    }\n  }), _vm._v(\"\\n                我的作品\\n            \")], 1), _vm._v(\" \"), _c('Menu-item', {\n    attrs: {\n      \"name\": \"/logout\"\n    }\n  }, [_c('Icon', {\n    attrs: {\n      \"type\": \"ios-analytics\"\n    }\n  }), _vm._v(\"\\n                退出登录\\n            \")], 1)], 1) : _vm._e()]), _vm._v(\" \"), _c('div', {\n    staticClass: \"layout-content\"\n  }, [_c('transition', {\n    attrs: {\n      \"mode\": \"out-in\"\n    }\n  }, [_c('router-view')], 1)], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"layout-copy\"\n  }, [_vm._v(\"\\n        2016-2017 © step8step.com\\n    \")])], 1)\n},staticRenderFns: []}\n\n/***/ })\n\n},[47]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.0d868a8c0926f86eaccc.js","import Vue from 'vue'\nimport Router from 'vue-router'\n\nVue.use(Router)\n\nexport default new Router({\n  routes: [\n    {\n      path: '/login',\n      component: () => import('@/pages/Login')\n    },\n    {\n      path: '/register',\n      component: () => import('@/pages/Register')\n    },\n    {\n      path: '/',\n      component: () => import('@/pages/MyCourses.vue')\n    },\n    {\n      path: '/courses',\n      component: () => import('@/pages/MyCourses.vue')\n    },\n    {\n      path: '/course/:id',\n      component: () => import('@/pages/Course')\n    },\n    {\n      path: '/section-codes/:sid',\n      component: () => import('@/pages/SectionCode')\n    },\n    {\n      path: '/section-tests/:sid',\n      component: () => import('@/pages/SectionTestcase')\n    },\n    // {\n    //   path: '/section-tests-blockly/:sid',\n    //   component: () => import('@/pages/SectionTestBlockly')\n    // },\n    {\n      path: '/section-docs/:sid',\n      component: () => import('@/pages/SectionDocument')\n    }\n  ]\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0593154d\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar Component = require(\"!../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"),\n  /* template */\n  require(\"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0593154d\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-0593154d\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = 41\n// module chunks = 10","import $ from 'jquery'\nimport Identity from '@/api/identity'\n\nlet G_API = Identity.G_API\n\nexport default {\n  Login,\n  Register,\n  validateToken\n}\n\nfunction Login(email, password) {\n  return $.ajax({\n    url: G_API + '/login',\n    method: 'post',\n    data: {\n      email,\n      password\n    }\n  })\n}\n\nfunction Register(email, password) {\n  return $.ajax({\n    url: G_API + '/createUser',\n    method: 'post',\n    data: {\n      email,\n      password\n    }\n  })\n}\n\n\nfunction validateToken(){\n  const token = Identity.getAccessToken()\n  return $.ajax({\n    url: G_API + '/validateToken',\n    method: 'post',\n    data: {\n      token\n    }\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/user.js","<template>\n    <div class=\"layout\">\n        <Menu mode=\"horizontal\" theme=\"dark\" active-name=\"/\" @on-select=\"onSelect\">\n            <div class=\"layout-logo\">\n            </div>\n            <div class=\"layout-nav\" v-if=\"isLogined\">\n                <Menu-item name=\"/courses\">\n                    <Icon type=\"flag\"></Icon>\n                    我的作品\n                </Menu-item>\n                <Menu-item name=\"/logout\">\n                    <Icon type=\"ios-analytics\"></Icon>\n                    退出登录\n                </Menu-item>\n            </div>\n        </Menu>\n        <div class=\"layout-content\">\n            <transition mode=\"out-in\">\n                <router-view></router-view>\n            </transition>\n        </div>\n        <div class=\"layout-copy\">\n            2016-2017 &copy; step8step.com\n        </div>\n    </div>\n</template> \n\n<script>\nimport identity from \"./api/identity\";\nimport User from \"./api/user\";\n\nexport default {\n  name: \"app\",\n  data() {\n    return {};\n  },\n  methods: {\n    onSelect(name) {\n      if (name === \"/logout\") {\n        identity.clear();\n        return window.location.reload();\n      }\n      this.$router.push(name);\n    }\n  },\n  computed: {\n    isLogined() {\n      return !identity.isExpired();\n    }\n  },\n  async mounted() {\n    try {\n      if (this.isLogined) {\n        const result = await User.validateToken();\n        const roles = result.roles;\n        if (roles.indexOf(\"author\") < 0) {\n          this.$Modal.warning({\n            title: \"未认证用户\",\n            content:\n              \"抱歉，只有认证作者才可以访问课程制作系统，请联系管理员认证。\",\n            onOk: () => {\n              identity.clear();\n              return window.location.reload();\n            }\n          });\n        }\n      }\n    } catch (err) {\n      if (err.status && err.status == 401) {\n        identity.clear();\n      } else console.error(err);\n    }\n  }\n};\n</script>\n\n<style scoped>\n.layout {\n  border: 1px solid #d7dde4;\n  background: #f5f7f9;\n}\n\n.layout-logo {\n  width: 30px;\n  height: 30px;\n  background: white;\n  border-radius: 15px;\n  float: left;\n  position: relative;\n  top: 15px;\n  left: 20px;\n  background-image: url(\"./assets/wizard-hat.png\");\n  background-size: 80% 80%;\n  background-repeat: no-repeat;\n  background-position: center;\n}\n\n.layout-nav {\n  width: 420px;\n  margin: 0 auto;\n}\n\n.layout-content {\n  z-index: 999;\n  min-height: 200px;\n  margin: 12px 3px;\n  overflow: hidden;\n  background: #fefefe;\n  border-radius: 4px;\n  padding: 8px;\n  border: 1px solid whitesmoke;\n  border-radius: 0px;\n  box-shadow: 0 0 15px lightblue;\n}\n\n.layout-content-main {\n  padding: 10px;\n}\n\n.layout-copy {\n  text-align: center;\n  padding: 10px 0 20px;\n  color: #9ea7b4;\n}\n</style>\n\n\n// WEBPACK FOOTER //\n// App.vue?1c92efd0","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\nimport router from './router'\nimport identity from '@/api/identity'\n\nVue.config.productionTip = false\n\nasync function main() {\n  await import('iview/dist/styles/iview.css')\n  const iView = await import('iview')\n\n  Vue.use(iView)\n\n  router.beforeEach((to, from, next) => {\n    iView.Spin.show()\n    if (identity.isExpired() && to.path !== '/login' && to.path !== '/register') {\n      router.push('/login')\n    } else if (!identity.isExpired() && to.path === '/login') {\n      router.push('/')\n    } else {\n      iView.LoadingBar.start()\n      next()\n    }\n  })\n\n  router.afterEach((to, from, next) => {\n    iView.LoadingBar.finish()\n    iView.Spin.hide()\n  })\n\n  /* eslint-disable no-new */\n  new Vue({\n    el: '#app',\n    router,\n    template: '<App/>',\n    components: {\n      App\n    }\n  })\n}\n\nmain()\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","const G_API = process.env.API_ROOT;\n\nexport default {\n    G_API,\n    param: '__identity',\n    get: function () {\n        let identity = localStorage.getItem(this.param);\n        return identity ? JSON.parse(identity) : null\n    },\n    set: function (data) {\n        localStorage.setItem(this.param, JSON.stringify(data))\n    },\n    clear: function () {\n        localStorage.removeItem(this.param)\n    },\n    getUserId: function () {\n        let identity = this.get()\n        return identity ? identity['uid'] : null\n    },\n    getAccessToken: function () {\n        let identity = this.get()\n        return identity ? identity['access_token'] : null\n    },\n    isExpired: function () {\n        let ctime = new Date().getTime()\n        let identity = this.get()\n        if (identity && identity['expire'] && identity['expire'] > ctime)\n            return false\n        else\n            return true\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/api/identity.js","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"layout\"\n  }, [_c('Menu', {\n    attrs: {\n      \"mode\": \"horizontal\",\n      \"theme\": \"dark\",\n      \"active-name\": \"/\"\n    },\n    on: {\n      \"on-select\": _vm.onSelect\n    }\n  }, [_c('div', {\n    staticClass: \"layout-logo\"\n  }), _vm._v(\" \"), (_vm.isLogined) ? _c('div', {\n    staticClass: \"layout-nav\"\n  }, [_c('Menu-item', {\n    attrs: {\n      \"name\": \"/courses\"\n    }\n  }, [_c('Icon', {\n    attrs: {\n      \"type\": \"flag\"\n    }\n  }), _vm._v(\"\\n                我的作品\\n            \")], 1), _vm._v(\" \"), _c('Menu-item', {\n    attrs: {\n      \"name\": \"/logout\"\n    }\n  }, [_c('Icon', {\n    attrs: {\n      \"type\": \"ios-analytics\"\n    }\n  }), _vm._v(\"\\n                退出登录\\n            \")], 1)], 1) : _vm._e()]), _vm._v(\" \"), _c('div', {\n    staticClass: \"layout-content\"\n  }, [_c('transition', {\n    attrs: {\n      \"mode\": \"out-in\"\n    }\n  }, [_c('router-view')], 1)], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"layout-copy\"\n  }, [_vm._v(\"\\n        2016-2017 © step8step.com\\n    \")])], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-0593154d\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = 93\n// module chunks = 10"],"sourceRoot":""}